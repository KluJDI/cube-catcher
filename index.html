<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кликер Боссов</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 100%;
            margin: 0;
            padding: 10px;
            background-color: #1e1e1e;
            color: white;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .coins {
            font-size: 18px;
            font-weight: bold;
            color: #FFD700;
        }
        
        .boss-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            flex-grow: 1;
        }
        
        .boss-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            margin-bottom: 15px;
            border: 3px solid #444;
            border-radius: 10px;
            background-color: #2a2a2a;
        }
        
        .boss-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .boss-hp {
            width: 100%;
            height: 20px;
            background-color: #444;
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .boss-hp-fill {
            height: 100%;
            background-color: #e74c3c;
            width: 100%;
            transition: width 0.3s;
        }
        
        .click-area {
            width: 150px;
            height: 150px;
            background-color: #3498db;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            user-select: none;
            cursor: pointer;
            box-shadow: 0 5px 0 #2980b9;
            transition: transform 0.1s;
        }
        
        .click-area:active {
            transform: scale(0.95);
            box-shadow: 0 2px 0 #2980b9;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background-color: #2a2a2a;
            padding: 10px;
            border-radius: 10px;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 18px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #aaa;
        }
        
        .upgrades {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .upgrade {
            background-color: #2a2a2a;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }
        
        .upgrade-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .upgrade-cost {
            color: #FFD700;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .upgrade-button {
            background-color: #27ae60;
            border: none;
            color: white;
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .upgrade-button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        .ad-button {
            background-color: #9b59b6;
            border: none;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="boss-level">Босс: 1</div>
        <div class="coins">0 RUB</div>
    </div>
    
    <div class="boss-container">
        <img src="https://via.placeholder.com/200" alt="Босс" class="boss-image" id="boss-image">
        <div class="boss-name" id="boss-name">Питеин Крипер</div>
        <div class="boss-hp">
            <div class="boss-hp-fill" id="boss-hp"></div>
        </div>
        
        <div class="click-area" id="click-area">КЛИК!</div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="clicks">0</div>
                <div class="stat-label">Кликов</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="dps">0</div>
                <div class="stat-label">Урон/сек</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="damage">1</div>
                <div class="stat-label">Урон/клик</div>
            </div>
        </div>
    </div>
    
    <div class="upgrades">
        <div class="upgrade">
            <div class="upgrade-name">Улучшить клик</div>
            <div class="upgrade-cost" id="click-upgrade-cost">50 RUB</div>
            <button class="upgrade-button" id="click-upgrade">Купить</button>
        </div>
        <div class="upgrade">
            <div class="upgrade-name">Авто-урон</div>
            <div class="upgrade-cost" id="auto-upgrade-cost">100 RUB</div>
            <button class="upgrade-button" id="auto-upgrade">Купить</button>
        </div>
    </div>
    
    <button class="ad-button">Посмотреть рекламу</button>

    <script>
        // Game state
        const gameState = {
            coins: 0,
            bossHp: 100,
            maxBossHp: 100,
            bossLevel: 1,
            clicks: 0,
            clickDamage: 1,
            autoDamage: 0,
            autoUpgradeLevel: 0,
            clickUpgradeLevel: 0,
            bosses: [
                { name: "Питеин Крипер", image: "https://via.placeholder.com/200/FF0000/FFFFFF?text=Босс+1" },
                { name: "Зюзель", image: "https://via.placeholder.com/200/00FF00/000000?text=Босс+2" },
                { name: "Монстр 404", image: "https://via.placeholder.com/200/0000FF/FFFFFF?text=Босс+3" },
                { name: "Король RUB", image: "https://via.placeholder.com/200/FFFF00/000000?text=Босс+4" },
                { name: "Финальный Босс", image: "https://via.placeholder.com/200/FF00FF/FFFFFF?text=Финальный" }
            ]
        };

        // DOM elements
        const elements = {
            coins: document.querySelector('.coins'),
            bossHp: document.getElementById('boss-hp'),
            bossLevel: document.querySelector('.boss-level'),
            bossName: document.getElementById('boss-name'),
            bossImage: document.getElementById('boss-image'),
            clickArea: document.getElementById('click-area'),
            clicks: document.getElementById('clicks'),
            dps: document.getElementById('dps'),
            damage: document.getElementById('damage'),
            clickUpgrade: document.getElementById('click-upgrade'),
            autoUpgrade: document.getElementById('auto-upgrade'),
            clickUpgradeCost: document.getElementById('click-upgrade-cost'),
            autoUpgradeCost: document.getElementById('auto-upgrade-cost')
        };

        // Initialize the game
        function initGame() {
            loadGame();
            updateUI();
            setupEventListeners();
            
            // Start game loop
            setInterval(gameLoop, 1000);
        }

        // Game loop
        function gameLoop() {
            // Auto damage
            if (gameState.autoDamage > 0) {
                attackBoss(gameState.autoDamage);
            }
            
            updateUI();
        }

        // Attack boss
        function attackBoss(damage) {
            gameState.bossHp -= damage;
            
            if (gameState.bossHp <= 0) {
                // Boss defeated
                gameState.coins += Math.floor(gameState.maxBossHp * 0.1);
                gameState.bossLevel++;
                
                // Increase boss HP for next level
                gameState.maxBossHp = Math.floor(gameState.maxBossHp * 1.5);
                gameState.bossHp = gameState.maxBossHp;
                
                // Update boss info
                updateBossInfo();
            }
            
            updateUI();
            saveGame();
        }

        // Update boss info based on level
        function updateBossInfo() {
            const bossIndex = Math.min(gameState.bossLevel - 1, gameState.bosses.length - 1);
            const boss = gameState.bosses[bossIndex];
            
            elements.bossName.textContent = boss.name;
            elements.bossImage.src = boss.image;
        }

        // Update UI
        function updateUI() {
            // Update coins
            elements.coins.textContent = `${gameState.coins.toFixed(2)} / 10 000 RUB`;
            
            // Update boss HP
            const hpPercent = (gameState.bossHp / gameState.maxBossHp) * 100;
            elements.bossHp.style.width = `${hpPercent}%`;
            
            // Update boss level
            elements.bossLevel.textContent = `Босс: ${gameState.bossLevel}`;
            
            // Update stats
            elements.clicks.textContent = gameState.clicks;
            elements.dps.textContent = gameState.autoDamage;
            elements.damage.textContent = gameState.clickDamage;
            
            // Update upgrade costs and availability
            const nextClickUpgradeCost = 50 * Math.pow(2, gameState.clickUpgradeLevel);
            elements.clickUpgradeCost.textContent = `${nextClickUpgradeCost} RUB`;
            elements.clickUpgrade.disabled = gameState.coins < nextClickUpgradeCost;
            
            const nextAutoUpgradeCost = 100 * Math.pow(2, gameState.autoUpgradeLevel);
            elements.autoUpgradeCost.textContent = `${nextAutoUpgradeCost} RUB`;
            elements.autoUpgrade.disabled = gameState.coins < nextAutoUpgradeCost;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Click attack
            elements.clickArea.addEventListener('click', () => {
                gameState.clicks++;
                attackBoss(gameState.clickDamage);
            });
            
            // Click upgrade
            elements.clickUpgrade.addEventListener('click', () => {
                const cost = 50 * Math.pow(2, gameState.clickUpgradeLevel);
                if (gameState.coins >= cost) {
                    gameState.coins -= cost;
                    gameState.clickUpgradeLevel++;
                    gameState.clickDamage += 1;
                    updateUI();
                    saveGame();
                }
            });
            
            // Auto upgrade
            elements.autoUpgrade.addEventListener('click', () => {
                const cost = 100 * Math.pow(2, gameState.autoUpgradeLevel);
                if (gameState.coins >= cost) {
                    gameState.coins -= cost;
                    gameState.autoUpgradeLevel++;
                    gameState.autoDamage += 1;
                    updateUI();
                    saveGame();
                }
            });
            
            // Ad button (placeholder)
            document.querySelector('.ad-button').addEventListener('click', () => {
                // In a real Telegram Mini App, this would show an ad
                alert("Здесь была бы реклама. В награду вы получаете 50 RUB!");
                gameState.coins += 50;
                updateUI();
                saveGame();
            });
        }

        // Save game to localStorage
        function saveGame() {
            localStorage.setItem('clickerGame', JSON.stringify(gameState));
        }

        // Load game from localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('clickerGame');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                Object.assign(gameState, parsed);
                updateBossInfo();
            }
        }

        // Initialize the game when the page loads
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
